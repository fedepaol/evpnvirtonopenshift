prov-leaf-host:
  type: network
  cidr: 192.168.10.2/31
  dhcp: false
  nat: false
prov-leaf-spine:
  type: network
  cidr: 192.168.1.2/31
  dhcp: false
  nat: false
leafocp-spine:
  type: network
  cidr: 192.168.1.4/31
  dhcp: false
  nat: false
leafocp-node:
  type: network
  cidr: 192.168.11.0/24
  dhcp: false
  nat: false

host:
  image: rhel9
  numcpus: 4
  memory: 512
  rootpassword: foo
  nets:
    - name: default
    - name: prov-leaf-host
      ip: 192.170.1.2/24
      netmask: 24
  scripts:
    - host/setup.sh
prov-leaf:
  image: rhel9
  numcpus: 8
  memory: 2048
  rootpassword: foo
  nets:
    - name: prov-leaf-spine
      ip: 192.168.1.2
      netmask: 31
    - name: prov-leaf-host
    - name: default
  files:
  - path: /tmp/frr
    origin: prov-leaf
  cmds:
    - dnf -y install frr
    - rm -rf etc/frr
    - cp -r /tmp/frr /etc/
    - systemctl start frr
    - sysctl -w net.ipv4.ip_forward=1
  scripts:
    - prov-leaf/setup.sh
spine:
  image: rhel9
  numcpus: 8
  memory: 2048
  rootpassword: foo
  nets:
    - name: prov-leaf-spine
      ip: 192.168.1.3
      netmask: 31
    - name: leafocp-spine
      ip: 192.168.1.4
      netmask: 31
    - name: default
  files:
  - path: /tmp/frr
    origin: spine
  cmds:
    - dnf -y install frr
    - rm -rf etc/frr
    - cp -r /tmp/frr /etc/
    - systemctl start frr
    - sysctl -w net.ipv4.ip_forward=1
leafocp:
  image: rhel9
  numcpus: 8
  memory: 2048
  rootpassword: foo
  nets:
    - name: leafocp-node
      ip: 192.168.11.2
      netmask: 24
    - name: leafocp-spine
      ip: 192.168.1.5
      netmask: 31
    - name: default
  files:
  - path: /tmp/frr
    origin: leafocp
  cmds:
    - dnf -y install frr
    - rm -rf etc/frr
    - cp -r /tmp/frr /etc/
    - systemctl start frr
    - sysctl -w net.ipv4.ip_forward=1

